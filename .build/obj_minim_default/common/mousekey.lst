   1               		.file	"mousekey.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.move_unit,"ax",@progbits
  12               	move_unit:
  13               	.LFB4:
  14               		.file 1 "tmk_core/common/mousekey.c"
   1:tmk_core/common/mousekey.c **** /*
   2:tmk_core/common/mousekey.c **** Copyright 2011 Jun Wako <wakojun@gmail.com>
   3:tmk_core/common/mousekey.c **** 
   4:tmk_core/common/mousekey.c **** This program is free software: you can redistribute it and/or modify
   5:tmk_core/common/mousekey.c **** it under the terms of the GNU General Public License as published by
   6:tmk_core/common/mousekey.c **** the Free Software Foundation, either version 2 of the License, or
   7:tmk_core/common/mousekey.c **** (at your option) any later version.
   8:tmk_core/common/mousekey.c **** 
   9:tmk_core/common/mousekey.c **** This program is distributed in the hope that it will be useful,
  10:tmk_core/common/mousekey.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:tmk_core/common/mousekey.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:tmk_core/common/mousekey.c **** GNU General Public License for more details.
  13:tmk_core/common/mousekey.c **** 
  14:tmk_core/common/mousekey.c **** You should have received a copy of the GNU General Public License
  15:tmk_core/common/mousekey.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:tmk_core/common/mousekey.c **** */
  17:tmk_core/common/mousekey.c **** 
  18:tmk_core/common/mousekey.c **** #include <stdint.h>
  19:tmk_core/common/mousekey.c **** #include "keycode.h"
  20:tmk_core/common/mousekey.c **** #include "host.h"
  21:tmk_core/common/mousekey.c **** #include "timer.h"
  22:tmk_core/common/mousekey.c **** #include "print.h"
  23:tmk_core/common/mousekey.c **** #include "debug.h"
  24:tmk_core/common/mousekey.c **** #include "mousekey.h"
  25:tmk_core/common/mousekey.c **** 
  26:tmk_core/common/mousekey.c **** inline int8_t times_inv_sqrt2(int8_t x) {
  27:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
  28:tmk_core/common/mousekey.c ****     // 0.70703125                 0.707106781
  29:tmk_core/common/mousekey.c ****     // 1 too small for x=99 and x=198
  30:tmk_core/common/mousekey.c ****     // This ends up being a mult and discard lower 8 bits
  31:tmk_core/common/mousekey.c ****     return (x * 181) >> 8;
  32:tmk_core/common/mousekey.c **** }
  33:tmk_core/common/mousekey.c **** 
  34:tmk_core/common/mousekey.c **** static report_mouse_t mouse_report = {0};
  35:tmk_core/common/mousekey.c **** static void           mousekey_debug(void);
  36:tmk_core/common/mousekey.c **** static uint8_t        mousekey_accel  = 0;
  37:tmk_core/common/mousekey.c **** static uint8_t        mousekey_repeat = 0;
  38:tmk_core/common/mousekey.c **** static uint16_t       last_timer      = 0;
  39:tmk_core/common/mousekey.c **** 
  40:tmk_core/common/mousekey.c **** #ifndef MK_3_SPEED
  41:tmk_core/common/mousekey.c **** 
  42:tmk_core/common/mousekey.c **** /*
  43:tmk_core/common/mousekey.c ****  * Mouse keys  acceleration algorithm
  44:tmk_core/common/mousekey.c ****  *  http://en.wikipedia.org/wiki/Mouse_keys
  45:tmk_core/common/mousekey.c ****  *
  46:tmk_core/common/mousekey.c ****  *  speed = delta * max_speed * (repeat / time_to_max)**((1000+curve)/1000)
  47:tmk_core/common/mousekey.c ****  */
  48:tmk_core/common/mousekey.c **** /* milliseconds between the initial key press and first repeated motion event (0-2550) */
  49:tmk_core/common/mousekey.c **** uint8_t mk_delay = MOUSEKEY_DELAY / 10;
  50:tmk_core/common/mousekey.c **** /* milliseconds between repeated motion events (0-255) */
  51:tmk_core/common/mousekey.c **** uint8_t mk_interval = MOUSEKEY_INTERVAL;
  52:tmk_core/common/mousekey.c **** /* steady speed (in action_delta units) applied each event (0-255) */
  53:tmk_core/common/mousekey.c **** uint8_t mk_max_speed = MOUSEKEY_MAX_SPEED;
  54:tmk_core/common/mousekey.c **** /* number of events (count) accelerating to steady speed (0-255) */
  55:tmk_core/common/mousekey.c **** uint8_t mk_time_to_max = MOUSEKEY_TIME_TO_MAX;
  56:tmk_core/common/mousekey.c **** /* ramp used to reach maximum pointer speed (NOT SUPPORTED) */
  57:tmk_core/common/mousekey.c **** // int8_t mk_curve = 0;
  58:tmk_core/common/mousekey.c **** /* wheel params */
  59:tmk_core/common/mousekey.c **** uint8_t mk_wheel_max_speed   = MOUSEKEY_WHEEL_MAX_SPEED;
  60:tmk_core/common/mousekey.c **** uint8_t mk_wheel_time_to_max = MOUSEKEY_WHEEL_TIME_TO_MAX;
  61:tmk_core/common/mousekey.c **** 
  62:tmk_core/common/mousekey.c **** static uint8_t move_unit(void) {
  15               		.loc 1 62 32 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
  63:tmk_core/common/mousekey.c ****     uint16_t unit;
  21               		.loc 1 63 5 view .LVU1
  64:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
  22               		.loc 1 64 5 view .LVU2
  23               		.loc 1 64 24 is_stmt 0 view .LVU3
  24 0000 8091 0000 		lds r24,mousekey_accel
  25               		.loc 1 64 8 view .LVU4
  26 0004 80FF      		sbrs r24,0
  27 0006 00C0      		rjmp .L2
  65:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 4;
  28               		.loc 1 65 9 is_stmt 1 view .LVU5
  29               		.loc 1 65 37 is_stmt 0 view .LVU6
  30 0008 8091 0000 		lds r24,mk_max_speed
  31 000c 90E0      		ldi r25,0
  32 000e 65E0      		ldi r22,lo8(5)
  33 0010 70E0      		ldi r23,0
  34 0012 0E94 0000 		call __mulhi3
  35               		.loc 1 65 53 view .LVU7
  36 0016 9595      		asr r25
  37 0018 8795      		ror r24
  38 001a 9595      		asr r25
  39 001c 8795      		ror r24
  40               	.LVL0:
  41               	.L3:
  66:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  67:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 2;
  68:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  69:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  70:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  71:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  72:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
  73:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  74:tmk_core/common/mousekey.c ****     } else {
  75:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed * mousekey_repeat) / mk_time_to_max;
  76:tmk_core/common/mousekey.c ****     }
  77:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_MOVE_MAX ? MOUSEKEY_MOVE_MAX : (unit == 0 ? 1 : unit));
  42               		.loc 1 77 5 is_stmt 1 view .LVU8
  43               		.loc 1 77 58 is_stmt 0 view .LVU9
  44 001e 8038      		cpi r24,-128
  45 0020 9105      		cpc r25,__zero_reg__
  46 0022 00F4      		brsh .L10
  47               		.loc 1 77 58 discriminator 1 view .LVU10
  48 0024 0097      		sbiw r24,0
  49 0026 01F0      		breq .L11
  50 0028 0895      		ret
  51               	.LVL1:
  52               	.L2:
  66:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  53               		.loc 1 66 12 is_stmt 1 view .LVU11
  66:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  54               		.loc 1 66 15 is_stmt 0 view .LVU12
  55 002a 81FF      		sbrs r24,1
  56 002c 00C0      		rjmp .L4
  67:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  57               		.loc 1 67 9 is_stmt 1 view .LVU13
  67:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  58               		.loc 1 67 37 is_stmt 0 view .LVU14
  59 002e 8091 0000 		lds r24,mk_max_speed
  60 0032 90E0      		ldi r25,0
  61 0034 65E0      		ldi r22,lo8(5)
  62 0036 70E0      		ldi r23,0
  63 0038 0E94 0000 		call __mulhi3
  67:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  64               		.loc 1 67 53 view .LVU15
  65 003c 9595      		asr r25
  66 003e 8795      		ror r24
  67               	.LVL2:
  67:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  68               		.loc 1 67 53 view .LVU16
  69 0040 00C0      		rjmp .L3
  70               	.LVL3:
  71               	.L4:
  68:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  72               		.loc 1 68 12 is_stmt 1 view .LVU17
  68:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  73               		.loc 1 68 15 is_stmt 0 view .LVU18
  74 0042 82FF      		sbrs r24,2
  75 0044 00C0      		rjmp .L5
  69:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  76               		.loc 1 69 9 is_stmt 1 view .LVU19
  69:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  77               		.loc 1 69 37 is_stmt 0 view .LVU20
  78 0046 8091 0000 		lds r24,mk_max_speed
  79 004a 90E0      		ldi r25,0
  80               	.L12:
  73:tmk_core/common/mousekey.c ****     } else {
  81               		.loc 1 73 36 view .LVU21
  82 004c 65E0      		ldi r22,lo8(5)
  83 004e 70E0      		ldi r23,0
  84 0050 0E94 0000 		call __mulhi3
  85               	.LVL4:
  73:tmk_core/common/mousekey.c ****     } else {
  86               		.loc 1 73 36 view .LVU22
  87 0054 00C0      		rjmp .L3
  88               	.LVL5:
  89               	.L5:
  70:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  90               		.loc 1 70 12 is_stmt 1 view .LVU23
  70:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  91               		.loc 1 70 32 is_stmt 0 view .LVU24
  92 0056 8091 0000 		lds r24,mousekey_repeat
  70:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  93               		.loc 1 70 15 view .LVU25
  94 005a 8823      		tst r24
  95 005c 01F0      		breq .L9
  72:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  96               		.loc 1 72 12 is_stmt 1 view .LVU26
  72:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  97               		.loc 1 72 32 is_stmt 0 view .LVU27
  98 005e 2091 0000 		lds r18,mk_time_to_max
  99 0062 6091 0000 		lds r22,mk_max_speed
 100 0066 70E0      		ldi r23,0
  72:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
 101               		.loc 1 72 15 view .LVU28
 102 0068 8217      		cp r24,r18
 103 006a 00F0      		brlo .L7
  73:tmk_core/common/mousekey.c ****     } else {
 104               		.loc 1 73 9 is_stmt 1 view .LVU29
  73:tmk_core/common/mousekey.c ****     } else {
 105               		.loc 1 73 36 is_stmt 0 view .LVU30
 106 006c CB01      		movw r24,r22
 107 006e 00C0      		rjmp .L12
 108               	.L7:
  75:tmk_core/common/mousekey.c ****     }
 109               		.loc 1 75 9 is_stmt 1 view .LVU31
  75:tmk_core/common/mousekey.c ****     }
 110               		.loc 1 75 52 is_stmt 0 view .LVU32
 111 0070 90E0      		ldi r25,0
 112 0072 0E94 0000 		call __mulhi3
 113 0076 65E0      		ldi r22,lo8(5)
 114 0078 70E0      		ldi r23,0
 115 007a 0E94 0000 		call __mulhi3
  75:tmk_core/common/mousekey.c ****     }
 116               		.loc 1 75 71 view .LVU33
 117 007e 622F      		mov r22,r18
 118 0080 70E0      		ldi r23,0
  75:tmk_core/common/mousekey.c ****     }
 119               		.loc 1 75 14 view .LVU34
 120 0082 0E94 0000 		call __divmodhi4
 121 0086 CB01      		movw r24,r22
 122               	.LVL6:
  75:tmk_core/common/mousekey.c ****     }
 123               		.loc 1 75 14 view .LVU35
 124 0088 00C0      		rjmp .L3
 125               	.LVL7:
 126               	.L9:
  71:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
 127               		.loc 1 71 14 view .LVU36
 128 008a 85E0      		ldi r24,lo8(5)
 129 008c 90E0      		ldi r25,0
 130 008e 0895      		ret
 131               	.LVL8:
 132               	.L10:
 133               		.loc 1 77 58 view .LVU37
 134 0090 8FE7      		ldi r24,lo8(127)
 135               	.LVL9:
 136               		.loc 1 77 58 view .LVU38
 137 0092 0895      		ret
 138               	.LVL10:
 139               	.L11:
 140               		.loc 1 77 58 view .LVU39
 141 0094 81E0      		ldi r24,lo8(1)
 142               	.LVL11:
 143               	/* epilogue start */
  78:tmk_core/common/mousekey.c **** }
 144               		.loc 1 78 1 view .LVU40
 145 0096 0895      		ret
 146               		.cfi_endproc
 147               	.LFE4:
 149               		.section	.text.wheel_unit,"ax",@progbits
 151               	wheel_unit:
 152               	.LFB5:
  79:tmk_core/common/mousekey.c **** 
  80:tmk_core/common/mousekey.c **** static uint8_t wheel_unit(void) {
 153               		.loc 1 80 33 is_stmt 1 view -0
 154               		.cfi_startproc
 155               	/* prologue: function */
 156               	/* frame size = 0 */
 157               	/* stack size = 0 */
 158               	.L__stack_usage = 0
  81:tmk_core/common/mousekey.c ****     uint16_t unit;
 159               		.loc 1 81 5 view .LVU42
  82:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
 160               		.loc 1 82 5 view .LVU43
 161               		.loc 1 82 24 is_stmt 0 view .LVU44
 162 0000 8091 0000 		lds r24,mousekey_accel
 163               		.loc 1 82 8 view .LVU45
 164 0004 80FF      		sbrs r24,0
 165 0006 00C0      		rjmp .L14
  83:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 4;
 166               		.loc 1 83 9 is_stmt 1 view .LVU46
 167               		.loc 1 83 38 is_stmt 0 view .LVU47
 168 0008 6091 0000 		lds r22,mk_wheel_max_speed
 169 000c 70E0      		ldi r23,0
 170               		.loc 1 83 60 view .LVU48
 171 000e 7595      		asr r23
 172 0010 6795      		ror r22
 173 0012 7595      		asr r23
 174 0014 6795      		ror r22
 175               	.LVL12:
 176               	.L15:
  84:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  85:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 2;
  86:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  87:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
  88:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  89:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
  90:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
  91:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
  92:tmk_core/common/mousekey.c ****     } else {
  93:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed * mousekey_repeat) / mk_wheel_time_to_max
  94:tmk_core/common/mousekey.c ****     }
  95:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_WHEEL_MAX ? MOUSEKEY_WHEEL_MAX : (unit == 0 ? 1 : unit));
 177               		.loc 1 95 60 view .LVU49
 178 0016 6115      		cp r22,__zero_reg__
 179 0018 7105      		cpc r23,__zero_reg__
 180 001a 01F0      		breq .L24
 181               	.LVL13:
 182               	.L19:
 183               		.loc 1 95 60 discriminator 3 view .LVU50
 184 001c 862F      		mov r24,r22
 185 001e 0895      		ret
 186               	.L14:
  84:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 187               		.loc 1 84 12 is_stmt 1 view .LVU51
  84:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 188               		.loc 1 84 15 is_stmt 0 view .LVU52
 189 0020 81FF      		sbrs r24,1
 190 0022 00C0      		rjmp .L16
  85:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 191               		.loc 1 85 9 is_stmt 1 view .LVU53
  85:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 192               		.loc 1 85 38 is_stmt 0 view .LVU54
 193 0024 6091 0000 		lds r22,mk_wheel_max_speed
 194 0028 70E0      		ldi r23,0
  85:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 195               		.loc 1 85 60 view .LVU55
 196 002a 7595      		asr r23
 197 002c 6795      		ror r22
 198               	.LVL14:
  85:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 199               		.loc 1 85 60 view .LVU56
 200 002e 00C0      		rjmp .L15
 201               	.LVL15:
 202               	.L16:
  86:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 203               		.loc 1 86 12 is_stmt 1 view .LVU57
  87:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
 204               		.loc 1 87 14 is_stmt 0 view .LVU58
 205 0030 6091 0000 		lds r22,mk_wheel_max_speed
 206 0034 70E0      		ldi r23,0
  86:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 207               		.loc 1 86 15 view .LVU59
 208 0036 82FD      		sbrc r24,2
 209 0038 00C0      		rjmp .L18
  88:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 210               		.loc 1 88 12 is_stmt 1 view .LVU60
  88:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 211               		.loc 1 88 32 is_stmt 0 view .LVU61
 212 003a 6091 0000 		lds r22,mousekey_repeat
  88:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
 213               		.loc 1 88 15 view .LVU62
 214 003e 6623      		tst r22
 215 0040 01F0      		breq .L22
  90:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 216               		.loc 1 90 12 is_stmt 1 view .LVU63
  90:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 217               		.loc 1 90 32 is_stmt 0 view .LVU64
 218 0042 2091 0000 		lds r18,mk_wheel_time_to_max
 219 0046 8091 0000 		lds r24,mk_wheel_max_speed
 220 004a 90E0      		ldi r25,0
  90:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
 221               		.loc 1 90 15 view .LVU65
 222 004c 6217      		cp r22,r18
 223 004e 00F0      		brlo .L20
  91:tmk_core/common/mousekey.c ****     } else {
 224               		.loc 1 91 9 is_stmt 1 view .LVU66
  91:tmk_core/common/mousekey.c ****     } else {
 225               		.loc 1 91 14 is_stmt 0 view .LVU67
 226 0050 BC01      		movw r22,r24
 227               	.LVL16:
 228               	.L18:
 229               		.loc 1 95 5 is_stmt 1 view .LVU68
 230               		.loc 1 95 60 is_stmt 0 view .LVU69
 231 0052 6038      		cpi r22,-128
 232 0054 7105      		cpc r23,__zero_reg__
 233 0056 00F0      		brlo .L15
 234 0058 8FE7      		ldi r24,lo8(127)
 235 005a 0895      		ret
 236               	.LVL17:
 237               	.L20:
  93:tmk_core/common/mousekey.c ****     }
 238               		.loc 1 93 9 is_stmt 1 view .LVU70
  93:tmk_core/common/mousekey.c ****     }
 239               		.loc 1 93 59 is_stmt 0 view .LVU71
 240 005c 70E0      		ldi r23,0
 241 005e 0E94 0000 		call __mulhi3
  93:tmk_core/common/mousekey.c ****     }
 242               		.loc 1 93 78 view .LVU72
 243 0062 622F      		mov r22,r18
 244 0064 70E0      		ldi r23,0
  93:tmk_core/common/mousekey.c ****     }
 245               		.loc 1 93 14 view .LVU73
 246 0066 0E94 0000 		call __divmodhi4
 247               	.LVL18:
  93:tmk_core/common/mousekey.c ****     }
 248               		.loc 1 93 14 view .LVU74
 249 006a 00C0      		rjmp .L18
 250               	.LVL19:
 251               	.L22:
  89:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 252               		.loc 1 89 14 view .LVU75
 253 006c 61E0      		ldi r22,lo8(1)
 254 006e 70E0      		ldi r23,0
 255 0070 00C0      		rjmp .L19
 256               	.LVL20:
 257               	.L24:
 258               		.loc 1 95 60 view .LVU76
 259 0072 81E0      		ldi r24,lo8(1)
 260               	/* epilogue start */
  96:tmk_core/common/mousekey.c **** }
 261               		.loc 1 96 1 view .LVU77
 262 0074 0895      		ret
 263               		.cfi_endproc
 264               	.LFE5:
 266               		.section	.text.mousekey_on,"ax",@progbits
 267               	.global	mousekey_on
 269               	mousekey_on:
 270               	.LVL21:
 271               	.LFB7:
  97:tmk_core/common/mousekey.c **** 
  98:tmk_core/common/mousekey.c **** void mousekey_task(void) {
  99:tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay * 10)) {
 100:tmk_core/common/mousekey.c ****         return;
 101:tmk_core/common/mousekey.c ****     }
 102:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) {
 103:tmk_core/common/mousekey.c ****         return;
 104:tmk_core/common/mousekey.c ****     }
 105:tmk_core/common/mousekey.c ****     if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 107:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 109:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 110:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 111:tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 112:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 113:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 114:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 115:tmk_core/common/mousekey.c ****         }
 116:tmk_core/common/mousekey.c ****         mouse_report.y = times_inv_sqrt2(mouse_report.y);
 117:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 118:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 119:tmk_core/common/mousekey.c ****         }
 120:tmk_core/common/mousekey.c ****     }
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = wheel_unit();
 122:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 124:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 125:tmk_core/common/mousekey.c ****     mousekey_send();
 126:tmk_core/common/mousekey.c **** }
 127:tmk_core/common/mousekey.c **** 
 128:tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code) {
 272               		.loc 1 128 32 is_stmt 1 view -0
 273               		.cfi_startproc
 274               	/* prologue: function */
 275               	/* frame size = 0 */
 276               	/* stack size = 0 */
 277               	.L__stack_usage = 0
 129:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP)
 278               		.loc 1 129 5 view .LVU79
 279               		.loc 1 129 8 is_stmt 0 view .LVU80
 280 0000 803F      		cpi r24,lo8(-16)
 281 0002 01F4      		brne .L26
 130:tmk_core/common/mousekey.c ****         mouse_report.y = move_unit() * -1;
 282               		.loc 1 130 9 is_stmt 1 view .LVU81
 283               		.loc 1 130 26 is_stmt 0 view .LVU82
 284 0004 0E94 0000 		call move_unit
 285               	.LVL22:
 286               		.loc 1 130 24 view .LVU83
 287 0008 8195      		neg r24
 288               	.L42:
 131:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 132:tmk_core/common/mousekey.c ****         mouse_report.y = move_unit();
 289               		.loc 1 132 24 view .LVU84
 290 000a 8093 0000 		sts mouse_report+3,r24
 291 000e 0895      		ret
 292               	.LVL23:
 293               	.L26:
 131:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 294               		.loc 1 131 10 is_stmt 1 view .LVU85
 131:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 295               		.loc 1 131 13 is_stmt 0 view .LVU86
 296 0010 813F      		cpi r24,lo8(-15)
 297 0012 01F4      		brne .L28
 298               		.loc 1 132 9 is_stmt 1 view .LVU87
 299               		.loc 1 132 26 is_stmt 0 view .LVU88
 300 0014 0E94 0000 		call move_unit
 301               	.LVL24:
 302               		.loc 1 132 26 view .LVU89
 303 0018 00C0      		rjmp .L42
 304               	.LVL25:
 305               	.L28:
 133:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)
 306               		.loc 1 133 10 is_stmt 1 view .LVU90
 307               		.loc 1 133 13 is_stmt 0 view .LVU91
 308 001a 823F      		cpi r24,lo8(-14)
 309 001c 01F4      		brne .L29
 134:tmk_core/common/mousekey.c ****         mouse_report.x = move_unit() * -1;
 310               		.loc 1 134 9 is_stmt 1 view .LVU92
 311               		.loc 1 134 26 is_stmt 0 view .LVU93
 312 001e 0E94 0000 		call move_unit
 313               	.LVL26:
 314               		.loc 1 134 24 view .LVU94
 315 0022 8195      		neg r24
 316               	.L44:
 135:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 136:tmk_core/common/mousekey.c ****         mouse_report.x = move_unit();
 317               		.loc 1 136 24 view .LVU95
 318 0024 8093 0000 		sts mouse_report+2,r24
 319 0028 0895      		ret
 320               	.LVL27:
 321               	.L29:
 135:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 322               		.loc 1 135 10 is_stmt 1 view .LVU96
 135:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 323               		.loc 1 135 13 is_stmt 0 view .LVU97
 324 002a 833F      		cpi r24,lo8(-13)
 325 002c 01F4      		brne .L30
 326               		.loc 1 136 9 is_stmt 1 view .LVU98
 327               		.loc 1 136 26 is_stmt 0 view .LVU99
 328 002e 0E94 0000 		call move_unit
 329               	.LVL28:
 330               		.loc 1 136 26 view .LVU100
 331 0032 00C0      		rjmp .L44
 332               	.LVL29:
 333               	.L30:
 137:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)
 334               		.loc 1 137 10 is_stmt 1 view .LVU101
 335               		.loc 1 137 13 is_stmt 0 view .LVU102
 336 0034 893F      		cpi r24,lo8(-7)
 337 0036 01F4      		brne .L31
 138:tmk_core/common/mousekey.c ****         mouse_report.v = wheel_unit();
 338               		.loc 1 138 9 is_stmt 1 view .LVU103
 339               		.loc 1 138 26 is_stmt 0 view .LVU104
 340 0038 0E94 0000 		call wheel_unit
 341               	.LVL30:
 342               	.L46:
 139:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 140:tmk_core/common/mousekey.c ****         mouse_report.v = wheel_unit() * -1;
 343               		.loc 1 140 24 view .LVU105
 344 003c 8093 0000 		sts mouse_report+4,r24
 345 0040 0895      		ret
 346               	.LVL31:
 347               	.L31:
 139:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 348               		.loc 1 139 10 is_stmt 1 view .LVU106
 139:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 349               		.loc 1 139 13 is_stmt 0 view .LVU107
 350 0042 8A3F      		cpi r24,lo8(-6)
 351 0044 01F4      		brne .L32
 352               		.loc 1 140 9 is_stmt 1 view .LVU108
 353               		.loc 1 140 26 is_stmt 0 view .LVU109
 354 0046 0E94 0000 		call wheel_unit
 355               	.LVL32:
 356               		.loc 1 140 24 view .LVU110
 357 004a 8195      		neg r24
 358 004c 00C0      		rjmp .L46
 359               	.LVL33:
 360               	.L32:
 141:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)
 361               		.loc 1 141 10 is_stmt 1 view .LVU111
 362               		.loc 1 141 13 is_stmt 0 view .LVU112
 363 004e 8B3F      		cpi r24,lo8(-5)
 364 0050 01F4      		brne .L33
 142:tmk_core/common/mousekey.c ****         mouse_report.h = wheel_unit() * -1;
 365               		.loc 1 142 9 is_stmt 1 view .LVU113
 366               		.loc 1 142 26 is_stmt 0 view .LVU114
 367 0052 0E94 0000 		call wheel_unit
 368               	.LVL34:
 369               		.loc 1 142 24 view .LVU115
 370 0056 8195      		neg r24
 371               	.L47:
 143:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 144:tmk_core/common/mousekey.c ****         mouse_report.h = wheel_unit();
 372               		.loc 1 144 24 view .LVU116
 373 0058 8093 0000 		sts mouse_report+5,r24
 374 005c 0895      		ret
 375               	.LVL35:
 376               	.L33:
 143:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 377               		.loc 1 143 10 is_stmt 1 view .LVU117
 143:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 378               		.loc 1 143 13 is_stmt 0 view .LVU118
 379 005e 8C3F      		cpi r24,lo8(-4)
 380 0060 01F4      		brne .L34
 381               		.loc 1 144 9 is_stmt 1 view .LVU119
 382               		.loc 1 144 26 is_stmt 0 view .LVU120
 383 0062 0E94 0000 		call wheel_unit
 384               	.LVL36:
 385               		.loc 1 144 26 view .LVU121
 386 0066 00C0      		rjmp .L47
 387               	.LVL37:
 388               	.L34:
 145:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 389               		.loc 1 145 10 is_stmt 1 view .LVU122
 390               		.loc 1 145 13 is_stmt 0 view .LVU123
 391 0068 843F      		cpi r24,lo8(-12)
 392 006a 01F4      		brne .L35
 146:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN1;
 393               		.loc 1 146 9 is_stmt 1 view .LVU124
 394               		.loc 1 146 30 is_stmt 0 view .LVU125
 395 006c 8091 0000 		lds r24,mouse_report+1
 396               	.LVL38:
 397               		.loc 1 146 30 view .LVU126
 398 0070 8160      		ori r24,lo8(1)
 399               	.L45:
 147:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 148:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN2;
 149:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 150:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 151:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 152:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 153:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 154:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 400               		.loc 1 154 30 view .LVU127
 401 0072 8093 0000 		sts mouse_report+1,r24
 402 0076 0895      		ret
 403               	.LVL39:
 404               	.L35:
 147:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 405               		.loc 1 147 10 is_stmt 1 view .LVU128
 147:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 406               		.loc 1 147 13 is_stmt 0 view .LVU129
 407 0078 853F      		cpi r24,lo8(-11)
 408 007a 01F4      		brne .L36
 148:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 409               		.loc 1 148 9 is_stmt 1 view .LVU130
 148:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 410               		.loc 1 148 30 is_stmt 0 view .LVU131
 411 007c 8091 0000 		lds r24,mouse_report+1
 412               	.LVL40:
 148:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 413               		.loc 1 148 30 view .LVU132
 414 0080 8260      		ori r24,lo8(2)
 415 0082 00C0      		rjmp .L45
 416               	.LVL41:
 417               	.L36:
 149:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 418               		.loc 1 149 10 is_stmt 1 view .LVU133
 149:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 419               		.loc 1 149 13 is_stmt 0 view .LVU134
 420 0084 863F      		cpi r24,lo8(-10)
 421 0086 01F4      		brne .L37
 150:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 422               		.loc 1 150 9 is_stmt 1 view .LVU135
 150:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 423               		.loc 1 150 30 is_stmt 0 view .LVU136
 424 0088 8091 0000 		lds r24,mouse_report+1
 425               	.LVL42:
 150:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 426               		.loc 1 150 30 view .LVU137
 427 008c 8460      		ori r24,lo8(4)
 428 008e 00C0      		rjmp .L45
 429               	.LVL43:
 430               	.L37:
 151:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 431               		.loc 1 151 10 is_stmt 1 view .LVU138
 151:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 432               		.loc 1 151 13 is_stmt 0 view .LVU139
 433 0090 873F      		cpi r24,lo8(-9)
 434 0092 01F4      		brne .L38
 152:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 435               		.loc 1 152 9 is_stmt 1 view .LVU140
 152:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 436               		.loc 1 152 30 is_stmt 0 view .LVU141
 437 0094 8091 0000 		lds r24,mouse_report+1
 438               	.LVL44:
 152:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 439               		.loc 1 152 30 view .LVU142
 440 0098 8860      		ori r24,lo8(8)
 441 009a 00C0      		rjmp .L45
 442               	.LVL45:
 443               	.L38:
 153:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 444               		.loc 1 153 10 is_stmt 1 view .LVU143
 153:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 445               		.loc 1 153 13 is_stmt 0 view .LVU144
 446 009c 883F      		cpi r24,lo8(-8)
 447 009e 01F4      		brne .L39
 448               		.loc 1 154 9 is_stmt 1 view .LVU145
 449               		.loc 1 154 30 is_stmt 0 view .LVU146
 450 00a0 8091 0000 		lds r24,mouse_report+1
 451               	.LVL46:
 452               		.loc 1 154 30 view .LVU147
 453 00a4 8061      		ori r24,lo8(16)
 454 00a6 00C0      		rjmp .L45
 455               	.LVL47:
 456               	.L39:
 155:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 457               		.loc 1 155 10 is_stmt 1 view .LVU148
 458               		.loc 1 155 13 is_stmt 0 view .LVU149
 459 00a8 8D3F      		cpi r24,lo8(-3)
 460 00aa 01F4      		brne .L40
 156:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 0);
 461               		.loc 1 156 9 is_stmt 1 view .LVU150
 462               		.loc 1 156 24 is_stmt 0 view .LVU151
 463 00ac 8091 0000 		lds r24,mousekey_accel
 464               	.LVL48:
 465               		.loc 1 156 24 view .LVU152
 466 00b0 8160      		ori r24,lo8(1)
 467               	.L43:
 157:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 158:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 1);
 159:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 160:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 468               		.loc 1 160 24 view .LVU153
 469 00b2 8093 0000 		sts mousekey_accel,r24
 470               	.L25:
 471               	/* epilogue start */
 161:tmk_core/common/mousekey.c **** }
 472               		.loc 1 161 1 view .LVU154
 473 00b6 0895      		ret
 474               	.LVL49:
 475               	.L40:
 157:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 476               		.loc 1 157 10 is_stmt 1 view .LVU155
 157:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 477               		.loc 1 157 13 is_stmt 0 view .LVU156
 478 00b8 8E3F      		cpi r24,lo8(-2)
 479 00ba 01F4      		brne .L41
 158:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 480               		.loc 1 158 9 is_stmt 1 view .LVU157
 158:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 481               		.loc 1 158 24 is_stmt 0 view .LVU158
 482 00bc 8091 0000 		lds r24,mousekey_accel
 483               	.LVL50:
 158:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 484               		.loc 1 158 24 view .LVU159
 485 00c0 8260      		ori r24,lo8(2)
 486 00c2 00C0      		rjmp .L43
 487               	.LVL51:
 488               	.L41:
 159:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 489               		.loc 1 159 10 is_stmt 1 view .LVU160
 159:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 490               		.loc 1 159 13 is_stmt 0 view .LVU161
 491 00c4 8F3F      		cpi r24,lo8(-1)
 492 00c6 01F4      		brne .L25
 160:tmk_core/common/mousekey.c **** }
 493               		.loc 1 160 9 is_stmt 1 view .LVU162
 160:tmk_core/common/mousekey.c **** }
 494               		.loc 1 160 24 is_stmt 0 view .LVU163
 495 00c8 8091 0000 		lds r24,mousekey_accel
 496               	.LVL52:
 160:tmk_core/common/mousekey.c **** }
 497               		.loc 1 160 24 view .LVU164
 498 00cc 8460      		ori r24,lo8(4)
 499 00ce 00C0      		rjmp .L43
 500               		.cfi_endproc
 501               	.LFE7:
 503               		.section	.text.mousekey_off,"ax",@progbits
 504               	.global	mousekey_off
 506               	mousekey_off:
 507               	.LVL53:
 508               	.LFB8:
 162:tmk_core/common/mousekey.c **** 
 163:tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code) {
 509               		.loc 1 163 33 is_stmt 1 view -0
 510               		.cfi_startproc
 511               	/* prologue: function */
 512               	/* frame size = 0 */
 513               	/* stack size = 0 */
 514               	.L__stack_usage = 0
 164:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP && mouse_report.y < 0)
 515               		.loc 1 164 5 view .LVU166
 516 0000 9091 0000 		lds r25,mouse_report+2
 517               		.loc 1 164 8 is_stmt 0 view .LVU167
 518 0004 803F      		cpi r24,lo8(-16)
 519 0006 01F4      		brne .L49
 520               		.loc 1 164 26 discriminator 1 view .LVU168
 521 0008 8091 0000 		lds r24,mouse_report+3
 522               	.LVL54:
 523               		.loc 1 164 26 discriminator 1 view .LVU169
 524 000c 87FD      		sbrc r24,7
 525               	.L52:
 165:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 526               		.loc 1 165 9 is_stmt 1 view .LVU170
 527               		.loc 1 165 24 is_stmt 0 view .LVU171
 528 000e 1092 0000 		sts mouse_report+3,__zero_reg__
 529               	.L50:
 166:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 167:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 168:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT && mouse_report.x < 0)
 169:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 170:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 171:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 172:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP && mouse_report.v > 0)
 173:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 174:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 175:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 176:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT && mouse_report.h < 0)
 177:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 178:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 179:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 180:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 181:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 182:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 183:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 184:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 185:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 186:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 187:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 188:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 189:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 190:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 191:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 192:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 193:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 194:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 195:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 196:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) m
 530               		.loc 1 196 5 is_stmt 1 view .LVU172
 531               		.loc 1 196 8 is_stmt 0 view .LVU173
 532 0012 9923      		tst r25
 533 0014 01F0      		breq .L54
 534               	.L48:
 535               	/* epilogue start */
 197:tmk_core/common/mousekey.c **** }
 536               		.loc 1 197 1 view .LVU174
 537 0016 0895      		ret
 538               	.LVL55:
 539               	.L49:
 166:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 540               		.loc 1 166 10 is_stmt 1 view .LVU175
 166:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 541               		.loc 1 166 13 is_stmt 0 view .LVU176
 542 0018 813F      		cpi r24,lo8(-15)
 543 001a 01F4      		brne .L51
 166:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 544               		.loc 1 166 33 discriminator 1 view .LVU177
 545 001c 8091 0000 		lds r24,mouse_report+3
 546               	.LVL56:
 166:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 547               		.loc 1 166 33 discriminator 1 view .LVU178
 548 0020 1816      		cp __zero_reg__,r24
 549 0022 04F0      		brlt .L52
 550 0024 00C0      		rjmp .L50
 551               	.LVL57:
 552               	.L51:
 168:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 553               		.loc 1 168 10 is_stmt 1 view .LVU179
 168:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 554               		.loc 1 168 13 is_stmt 0 view .LVU180
 555 0026 823F      		cpi r24,lo8(-14)
 556 0028 01F4      		brne .L53
 168:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 557               		.loc 1 168 33 discriminator 1 view .LVU181
 558 002a 97FF      		sbrs r25,7
 559 002c 00C0      		rjmp .L50
 560               	.L56:
 169:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 561               		.loc 1 169 9 is_stmt 1 view .LVU182
 169:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 562               		.loc 1 169 24 is_stmt 0 view .LVU183
 563 002e 1092 0000 		sts mouse_report+2,__zero_reg__
 564               	.LVL58:
 565               	.L54:
 196:tmk_core/common/mousekey.c **** }
 566               		.loc 1 196 5 is_stmt 1 view .LVU184
 196:tmk_core/common/mousekey.c **** }
 567               		.loc 1 196 75 is_stmt 0 view .LVU185
 568 0032 8091 0000 		lds r24,mouse_report+3
 569 0036 9091 0000 		lds r25,mouse_report+4
 570 003a 892B      		or r24,r25
 571 003c 9091 0000 		lds r25,mouse_report+5
 572 0040 892B      		or r24,r25
 573 0042 01F4      		brne .L48
 196:tmk_core/common/mousekey.c **** }
 574               		.loc 1 196 99 is_stmt 1 discriminator 4 view .LVU186
 196:tmk_core/common/mousekey.c **** }
 575               		.loc 1 196 115 is_stmt 0 discriminator 4 view .LVU187
 576 0044 1092 0000 		sts mousekey_repeat,__zero_reg__
 577               		.loc 1 197 1 discriminator 4 view .LVU188
 578 0048 0895      		ret
 579               	.LVL59:
 580               	.L53:
 170:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 581               		.loc 1 170 10 is_stmt 1 view .LVU189
 170:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 582               		.loc 1 170 13 is_stmt 0 view .LVU190
 583 004a 833F      		cpi r24,lo8(-13)
 584 004c 01F4      		brne .L55
 170:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 585               		.loc 1 170 34 discriminator 1 view .LVU191
 586 004e 1916      		cp __zero_reg__,r25
 587 0050 04F0      		brlt .L56
 588 0052 00C0      		rjmp .L50
 589               	.L55:
 172:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 590               		.loc 1 172 10 is_stmt 1 view .LVU192
 172:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 591               		.loc 1 172 13 is_stmt 0 view .LVU193
 592 0054 893F      		cpi r24,lo8(-7)
 593 0056 01F4      		brne .L57
 172:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 594               		.loc 1 172 34 discriminator 1 view .LVU194
 595 0058 8091 0000 		lds r24,mouse_report+4
 596               	.LVL60:
 172:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 597               		.loc 1 172 34 discriminator 1 view .LVU195
 598 005c 1816      		cp __zero_reg__,r24
 599 005e 04F4      		brge .L50
 600               	.L59:
 173:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 601               		.loc 1 173 9 is_stmt 1 view .LVU196
 173:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 602               		.loc 1 173 24 is_stmt 0 view .LVU197
 603 0060 1092 0000 		sts mouse_report+4,__zero_reg__
 604 0064 00C0      		rjmp .L50
 605               	.LVL61:
 606               	.L57:
 174:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 607               		.loc 1 174 10 is_stmt 1 view .LVU198
 174:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 608               		.loc 1 174 13 is_stmt 0 view .LVU199
 609 0066 8A3F      		cpi r24,lo8(-6)
 610 0068 01F4      		brne .L58
 174:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 611               		.loc 1 174 36 discriminator 1 view .LVU200
 612 006a 8091 0000 		lds r24,mouse_report+4
 613               	.LVL62:
 174:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 614               		.loc 1 174 36 discriminator 1 view .LVU201
 615 006e 87FF      		sbrs r24,7
 616 0070 00C0      		rjmp .L50
 617 0072 00C0      		rjmp .L59
 618               	.LVL63:
 619               	.L58:
 176:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 620               		.loc 1 176 10 is_stmt 1 view .LVU202
 176:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 621               		.loc 1 176 13 is_stmt 0 view .LVU203
 622 0074 8B3F      		cpi r24,lo8(-5)
 623 0076 01F4      		brne .L60
 176:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 624               		.loc 1 176 36 discriminator 1 view .LVU204
 625 0078 8091 0000 		lds r24,mouse_report+5
 626               	.LVL64:
 176:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 627               		.loc 1 176 36 discriminator 1 view .LVU205
 628 007c 87FF      		sbrs r24,7
 629 007e 00C0      		rjmp .L50
 630               	.L62:
 177:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 631               		.loc 1 177 9 is_stmt 1 view .LVU206
 177:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 632               		.loc 1 177 24 is_stmt 0 view .LVU207
 633 0080 1092 0000 		sts mouse_report+5,__zero_reg__
 634 0084 00C0      		rjmp .L50
 635               	.LVL65:
 636               	.L60:
 178:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 637               		.loc 1 178 10 is_stmt 1 view .LVU208
 178:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 638               		.loc 1 178 13 is_stmt 0 view .LVU209
 639 0086 8C3F      		cpi r24,lo8(-4)
 640 0088 01F4      		brne .L61
 178:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 641               		.loc 1 178 37 discriminator 1 view .LVU210
 642 008a 8091 0000 		lds r24,mouse_report+5
 643               	.LVL66:
 178:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 644               		.loc 1 178 37 discriminator 1 view .LVU211
 645 008e 1816      		cp __zero_reg__,r24
 646 0090 04F0      		brlt .L62
 647 0092 00C0      		rjmp .L50
 648               	.LVL67:
 649               	.L61:
 180:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 650               		.loc 1 180 10 is_stmt 1 view .LVU212
 180:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 651               		.loc 1 180 13 is_stmt 0 view .LVU213
 652 0094 843F      		cpi r24,lo8(-12)
 653 0096 01F4      		brne .L63
 181:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 654               		.loc 1 181 9 is_stmt 1 view .LVU214
 181:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 655               		.loc 1 181 30 is_stmt 0 view .LVU215
 656 0098 8091 0000 		lds r24,mouse_report+1
 657               	.LVL68:
 181:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 658               		.loc 1 181 30 view .LVU216
 659 009c 8E7F      		andi r24,lo8(-2)
 660               	.L76:
 189:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 661               		.loc 1 189 30 view .LVU217
 662 009e 8093 0000 		sts mouse_report+1,r24
 663 00a2 00C0      		rjmp .L50
 664               	.LVL69:
 665               	.L63:
 182:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 666               		.loc 1 182 10 is_stmt 1 view .LVU218
 182:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 667               		.loc 1 182 13 is_stmt 0 view .LVU219
 668 00a4 853F      		cpi r24,lo8(-11)
 669 00a6 01F4      		brne .L64
 183:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 670               		.loc 1 183 9 is_stmt 1 view .LVU220
 183:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 671               		.loc 1 183 30 is_stmt 0 view .LVU221
 672 00a8 8091 0000 		lds r24,mouse_report+1
 673               	.LVL70:
 183:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 674               		.loc 1 183 30 view .LVU222
 675 00ac 8D7F      		andi r24,lo8(-3)
 676 00ae 00C0      		rjmp .L76
 677               	.LVL71:
 678               	.L64:
 184:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 679               		.loc 1 184 10 is_stmt 1 view .LVU223
 184:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 680               		.loc 1 184 13 is_stmt 0 view .LVU224
 681 00b0 863F      		cpi r24,lo8(-10)
 682 00b2 01F4      		brne .L65
 185:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 683               		.loc 1 185 9 is_stmt 1 view .LVU225
 185:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 684               		.loc 1 185 30 is_stmt 0 view .LVU226
 685 00b4 8091 0000 		lds r24,mouse_report+1
 686               	.LVL72:
 185:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 687               		.loc 1 185 30 view .LVU227
 688 00b8 8B7F      		andi r24,lo8(-5)
 689 00ba 00C0      		rjmp .L76
 690               	.LVL73:
 691               	.L65:
 186:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 692               		.loc 1 186 10 is_stmt 1 view .LVU228
 186:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 693               		.loc 1 186 13 is_stmt 0 view .LVU229
 694 00bc 873F      		cpi r24,lo8(-9)
 695 00be 01F4      		brne .L66
 187:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 696               		.loc 1 187 9 is_stmt 1 view .LVU230
 187:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 697               		.loc 1 187 30 is_stmt 0 view .LVU231
 698 00c0 8091 0000 		lds r24,mouse_report+1
 699               	.LVL74:
 187:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 700               		.loc 1 187 30 view .LVU232
 701 00c4 877F      		andi r24,lo8(-9)
 702 00c6 00C0      		rjmp .L76
 703               	.LVL75:
 704               	.L66:
 188:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 705               		.loc 1 188 10 is_stmt 1 view .LVU233
 188:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 706               		.loc 1 188 13 is_stmt 0 view .LVU234
 707 00c8 883F      		cpi r24,lo8(-8)
 708 00ca 01F4      		brne .L67
 189:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 709               		.loc 1 189 9 is_stmt 1 view .LVU235
 189:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 710               		.loc 1 189 30 is_stmt 0 view .LVU236
 711 00cc 8091 0000 		lds r24,mouse_report+1
 712               	.LVL76:
 189:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 713               		.loc 1 189 30 view .LVU237
 714 00d0 8F7E      		andi r24,lo8(-17)
 715 00d2 00C0      		rjmp .L76
 716               	.LVL77:
 717               	.L67:
 190:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 718               		.loc 1 190 10 is_stmt 1 view .LVU238
 190:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 719               		.loc 1 190 13 is_stmt 0 view .LVU239
 720 00d4 8D3F      		cpi r24,lo8(-3)
 721 00d6 01F4      		brne .L68
 191:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 722               		.loc 1 191 9 is_stmt 1 view .LVU240
 191:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 723               		.loc 1 191 24 is_stmt 0 view .LVU241
 724 00d8 8091 0000 		lds r24,mousekey_accel
 725               	.LVL78:
 191:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 726               		.loc 1 191 24 view .LVU242
 727 00dc 8E7F      		andi r24,lo8(-2)
 728               	.L77:
 195:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) m
 729               		.loc 1 195 24 view .LVU243
 730 00de 8093 0000 		sts mousekey_accel,r24
 731 00e2 00C0      		rjmp .L50
 732               	.LVL79:
 733               	.L68:
 192:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 734               		.loc 1 192 10 is_stmt 1 view .LVU244
 192:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 735               		.loc 1 192 13 is_stmt 0 view .LVU245
 736 00e4 8E3F      		cpi r24,lo8(-2)
 737 00e6 01F4      		brne .L69
 193:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 738               		.loc 1 193 9 is_stmt 1 view .LVU246
 193:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 739               		.loc 1 193 24 is_stmt 0 view .LVU247
 740 00e8 8091 0000 		lds r24,mousekey_accel
 741               	.LVL80:
 193:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 742               		.loc 1 193 24 view .LVU248
 743 00ec 8D7F      		andi r24,lo8(-3)
 744 00ee 00C0      		rjmp .L77
 745               	.LVL81:
 746               	.L69:
 194:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 747               		.loc 1 194 10 is_stmt 1 view .LVU249
 194:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 748               		.loc 1 194 13 is_stmt 0 view .LVU250
 749 00f0 8F3F      		cpi r24,lo8(-1)
 750 00f2 01F0      		breq .+2
 751 00f4 00C0      		rjmp .L50
 195:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) m
 752               		.loc 1 195 9 is_stmt 1 view .LVU251
 195:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) m
 753               		.loc 1 195 24 is_stmt 0 view .LVU252
 754 00f6 8091 0000 		lds r24,mousekey_accel
 755               	.LVL82:
 195:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) m
 756               		.loc 1 195 24 view .LVU253
 757 00fa 8B7F      		andi r24,lo8(-5)
 758 00fc 00C0      		rjmp .L77
 759               		.cfi_endproc
 760               	.LFE8:
 762               		.section	.text.mousekey_send,"ax",@progbits
 763               	.global	mousekey_send
 765               	mousekey_send:
 766               	.LFB9:
 198:tmk_core/common/mousekey.c **** 
 199:tmk_core/common/mousekey.c **** #else /* #ifndef MK_3_SPEED */
 200:tmk_core/common/mousekey.c **** 
 201:tmk_core/common/mousekey.c **** enum { mkspd_unmod, mkspd_0, mkspd_1, mkspd_2, mkspd_COUNT };
 202:tmk_core/common/mousekey.c **** #    ifndef MK_MOMENTARY_ACCEL
 203:tmk_core/common/mousekey.c **** static uint8_t  mk_speed                 = mkspd_1;
 204:tmk_core/common/mousekey.c **** #    else
 205:tmk_core/common/mousekey.c **** static uint8_t mk_speed      = mkspd_unmod;
 206:tmk_core/common/mousekey.c **** static uint8_t mkspd_DEFAULT = mkspd_unmod;
 207:tmk_core/common/mousekey.c **** #    endif
 208:tmk_core/common/mousekey.c **** static uint16_t last_timer_c             = 0;
 209:tmk_core/common/mousekey.c **** static uint16_t last_timer_w             = 0;
 210:tmk_core/common/mousekey.c **** uint16_t        c_offsets[mkspd_COUNT]   = {MK_C_OFFSET_UNMOD, MK_C_OFFSET_0, MK_C_OFFSET_1, MK_C_O
 211:tmk_core/common/mousekey.c **** uint16_t        c_intervals[mkspd_COUNT] = {MK_C_INTERVAL_UNMOD, MK_C_INTERVAL_0, MK_C_INTERVAL_1, 
 212:tmk_core/common/mousekey.c **** uint16_t        w_offsets[mkspd_COUNT]   = {MK_W_OFFSET_UNMOD, MK_W_OFFSET_0, MK_W_OFFSET_1, MK_W_O
 213:tmk_core/common/mousekey.c **** uint16_t        w_intervals[mkspd_COUNT] = {MK_W_INTERVAL_UNMOD, MK_W_INTERVAL_0, MK_W_INTERVAL_1, 
 214:tmk_core/common/mousekey.c **** 
 215:tmk_core/common/mousekey.c **** void mousekey_task(void) {
 216:tmk_core/common/mousekey.c ****     // report cursor and scroll movement independently
 217:tmk_core/common/mousekey.c ****     report_mouse_t const tmpmr = mouse_report;
 218:tmk_core/common/mousekey.c ****     if ((mouse_report.x || mouse_report.y) && timer_elapsed(last_timer_c) > c_intervals[mk_speed]) 
 219:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 220:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 221:tmk_core/common/mousekey.c ****         mousekey_send();
 222:tmk_core/common/mousekey.c ****         last_timer_c = last_timer;
 223:tmk_core/common/mousekey.c ****         mouse_report = tmpmr;
 224:tmk_core/common/mousekey.c ****     }
 225:tmk_core/common/mousekey.c ****     if ((mouse_report.h || mouse_report.v) && timer_elapsed(last_timer_w) > w_intervals[mk_speed]) 
 226:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 227:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 228:tmk_core/common/mousekey.c ****         mousekey_send();
 229:tmk_core/common/mousekey.c ****         last_timer_w = last_timer;
 230:tmk_core/common/mousekey.c ****         mouse_report = tmpmr;
 231:tmk_core/common/mousekey.c ****     }
 232:tmk_core/common/mousekey.c **** }
 233:tmk_core/common/mousekey.c **** 
 234:tmk_core/common/mousekey.c **** void adjust_speed(void) {
 235:tmk_core/common/mousekey.c ****     uint16_t const c_offset = c_offsets[mk_speed];
 236:tmk_core/common/mousekey.c ****     uint16_t const w_offset = w_offsets[mk_speed];
 237:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = c_offset;
 238:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = c_offset * -1;
 239:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = c_offset;
 240:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = c_offset * -1;
 241:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = w_offset;
 242:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = w_offset * -1;
 243:tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = w_offset;
 244:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = w_offset * -1;
 245:tmk_core/common/mousekey.c ****     // adjust for diagonals
 246:tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 247:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 248:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 249:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 250:tmk_core/common/mousekey.c ****         }
 251:tmk_core/common/mousekey.c ****         mouse_report.y = times_inv_sqrt2(mouse_report.y);
 252:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 253:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 254:tmk_core/common/mousekey.c ****         }
 255:tmk_core/common/mousekey.c ****     }
 256:tmk_core/common/mousekey.c ****     if (mouse_report.h && mouse_report.v) {
 257:tmk_core/common/mousekey.c ****         mouse_report.h = times_inv_sqrt2(mouse_report.h);
 258:tmk_core/common/mousekey.c ****         mouse_report.v = times_inv_sqrt2(mouse_report.v);
 259:tmk_core/common/mousekey.c ****     }
 260:tmk_core/common/mousekey.c **** }
 261:tmk_core/common/mousekey.c **** 
 262:tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code) {
 263:tmk_core/common/mousekey.c ****     uint16_t const c_offset  = c_offsets[mk_speed];
 264:tmk_core/common/mousekey.c ****     uint16_t const w_offset  = w_offsets[mk_speed];
 265:tmk_core/common/mousekey.c ****     uint8_t const  old_speed = mk_speed;
 266:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP)
 267:tmk_core/common/mousekey.c ****         mouse_report.y = c_offset * -1;
 268:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 269:tmk_core/common/mousekey.c ****         mouse_report.y = c_offset;
 270:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)
 271:tmk_core/common/mousekey.c ****         mouse_report.x = c_offset * -1;
 272:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 273:tmk_core/common/mousekey.c ****         mouse_report.x = c_offset;
 274:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)
 275:tmk_core/common/mousekey.c ****         mouse_report.v = w_offset;
 276:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 277:tmk_core/common/mousekey.c ****         mouse_report.v = w_offset * -1;
 278:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)
 279:tmk_core/common/mousekey.c ****         mouse_report.h = w_offset * -1;
 280:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 281:tmk_core/common/mousekey.c ****         mouse_report.h = w_offset;
 282:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 283:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN1;
 284:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 285:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN2;
 286:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 287:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 288:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 289:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 290:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 291:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 292:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 293:tmk_core/common/mousekey.c ****         mk_speed = mkspd_0;
 294:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 295:tmk_core/common/mousekey.c ****         mk_speed = mkspd_1;
 296:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 297:tmk_core/common/mousekey.c ****         mk_speed = mkspd_2;
 298:tmk_core/common/mousekey.c ****     if (mk_speed != old_speed) adjust_speed();
 299:tmk_core/common/mousekey.c **** }
 300:tmk_core/common/mousekey.c **** 
 301:tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code) {
 302:tmk_core/common/mousekey.c **** #    ifdef MK_MOMENTARY_ACCEL
 303:tmk_core/common/mousekey.c ****     uint8_t const old_speed = mk_speed;
 304:tmk_core/common/mousekey.c **** #    endif
 305:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP && mouse_report.y < 0)
 306:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 307:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 308:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 309:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT && mouse_report.x < 0)
 310:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 311:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 312:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 313:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP && mouse_report.v > 0)
 314:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 315:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 316:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 317:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT && mouse_report.h < 0)
 318:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 319:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 320:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 321:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 322:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 323:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 324:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 325:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 326:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 327:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 328:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 329:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 330:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 331:tmk_core/common/mousekey.c **** #    ifdef MK_MOMENTARY_ACCEL
 332:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 333:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 334:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 335:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 336:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 337:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 338:tmk_core/common/mousekey.c ****     if (mk_speed != old_speed) adjust_speed();
 339:tmk_core/common/mousekey.c **** #    endif
 340:tmk_core/common/mousekey.c **** }
 341:tmk_core/common/mousekey.c **** 
 342:tmk_core/common/mousekey.c **** #endif /* #ifndef MK_3_SPEED */
 343:tmk_core/common/mousekey.c **** 
 344:tmk_core/common/mousekey.c **** void mousekey_send(void) {
 767               		.loc 1 344 26 is_stmt 1 view -0
 768               		.cfi_startproc
 769               	/* prologue: function */
 770               	/* frame size = 0 */
 771               	/* stack size = 0 */
 772               	.L__stack_usage = 0
 345:tmk_core/common/mousekey.c ****     mousekey_debug();
 773               		.loc 1 345 5 view .LVU255
 774               	.LBB23:
 775               	.LBI23:
 346:tmk_core/common/mousekey.c ****     host_mouse_send(&mouse_report);
 347:tmk_core/common/mousekey.c ****     last_timer = timer_read();
 348:tmk_core/common/mousekey.c **** }
 349:tmk_core/common/mousekey.c **** 
 350:tmk_core/common/mousekey.c **** void mousekey_clear(void) {
 351:tmk_core/common/mousekey.c ****     mouse_report    = (report_mouse_t){};
 352:tmk_core/common/mousekey.c ****     mousekey_repeat = 0;
 353:tmk_core/common/mousekey.c ****     mousekey_accel  = 0;
 354:tmk_core/common/mousekey.c **** }
 355:tmk_core/common/mousekey.c **** 
 356:tmk_core/common/mousekey.c **** static void mousekey_debug(void) {
 776               		.loc 1 356 13 view .LVU256
 777               	.LBB24:
 357:tmk_core/common/mousekey.c ****     if (!debug_mouse) return;
 778               		.loc 1 357 5 view .LVU257
 779               		.loc 1 357 10 is_stmt 0 view .LVU258
 780 0000 8091 0000 		lds r24,debug_config
 781               		.loc 1 357 8 view .LVU259
 782 0004 83FF      		sbrs r24,3
 783 0006 00C0      		rjmp .L79
 358:tmk_core/common/mousekey.c ****     print("mousekey [btn|x y v h](rep/acl): [");
 784               		.loc 1 358 5 is_stmt 1 view .LVU260
 785               	.LBE24:
 786               	.LBE23:
 787               		.loc 1 358 5 view .LVU261
 788               		.loc 1 358 5 view .LVU262
 789               	.LBB40:
 790               	.LBB25:
 791 0008 80E0      		ldi r24,lo8(__c.2163)
 792 000a 90E0      		ldi r25,hi8(__c.2163)
 793 000c 0E94 0000 		call xputs
 359:tmk_core/common/mousekey.c ****     phex(mouse_report.buttons);
 794               		.loc 1 359 5 view .LVU263
 795               	.LBE25:
 796               	.LBE40:
 797               		.loc 1 359 5 view .LVU264
 798               		.loc 1 359 5 view .LVU265
 799               	.LBB41:
 800               	.LBB26:
 801 0010 8091 0000 		lds r24,mouse_report+1
 802 0014 1F92      		push __zero_reg__
 803               	.LCFI0:
 804               		.cfi_def_cfa_offset 3
 805 0016 8F93      		push r24
 806               	.LCFI1:
 807               		.cfi_def_cfa_offset 4
 808 0018 80E0      		ldi r24,lo8(__c.2165)
 809 001a 90E0      		ldi r25,hi8(__c.2165)
 810 001c 9F93      		push r25
 811               	.LCFI2:
 812               		.cfi_def_cfa_offset 5
 813 001e 8F93      		push r24
 814               	.LCFI3:
 815               		.cfi_def_cfa_offset 6
 816 0020 0E94 0000 		call __xprintf
 360:tmk_core/common/mousekey.c ****     print("|");
 817               		.loc 1 360 5 view .LVU266
 818               	.LBE26:
 819               	.LBE41:
 820               		.loc 1 360 5 view .LVU267
 821               		.loc 1 360 5 view .LVU268
 822               	.LBB42:
 823               	.LBB27:
 824 0024 80E0      		ldi r24,lo8(__c.2167)
 825 0026 90E0      		ldi r25,hi8(__c.2167)
 826 0028 0E94 0000 		call xputs
 361:tmk_core/common/mousekey.c ****     print_decs(mouse_report.x);
 827               		.loc 1 361 5 view .LVU269
 828               	.LBE27:
 829               	.LBE42:
 830               		.loc 1 361 5 view .LVU270
 831               		.loc 1 361 5 view .LVU271
 832               	.LBB43:
 833               	.LBB28:
 834 002c 8091 0000 		lds r24,mouse_report+2
 835 0030 282F      		mov r18,r24
 836 0032 082E      		mov __tmp_reg__,r24
 837 0034 000C      		lsl r0
 838 0036 330B      		sbc r19,r19
 839 0038 3F93      		push r19
 840               	.LCFI4:
 841               		.cfi_def_cfa_offset 7
 842 003a 8F93      		push r24
 843               	.LCFI5:
 844               		.cfi_def_cfa_offset 8
 845 003c 80E0      		ldi r24,lo8(__c.2169)
 846 003e 90E0      		ldi r25,hi8(__c.2169)
 847 0040 9F93      		push r25
 848               	.LCFI6:
 849               		.cfi_def_cfa_offset 9
 850 0042 8F93      		push r24
 851               	.LCFI7:
 852               		.cfi_def_cfa_offset 10
 853 0044 0E94 0000 		call __xprintf
 362:tmk_core/common/mousekey.c ****     print(" ");
 854               		.loc 1 362 5 view .LVU272
 855               	.LBE28:
 856               	.LBE43:
 857               		.loc 1 362 5 view .LVU273
 858               		.loc 1 362 5 view .LVU274
 859               	.LBB44:
 860               	.LBB29:
 861 0048 80E0      		ldi r24,lo8(__c.2171)
 862 004a 90E0      		ldi r25,hi8(__c.2171)
 863 004c 0E94 0000 		call xputs
 363:tmk_core/common/mousekey.c ****     print_decs(mouse_report.y);
 864               		.loc 1 363 5 view .LVU275
 865               	.LBE29:
 866               	.LBE44:
 867               		.loc 1 363 5 view .LVU276
 868               		.loc 1 363 5 view .LVU277
 869               	.LBB45:
 870               	.LBB30:
 871 0050 8091 0000 		lds r24,mouse_report+3
 872 0054 282F      		mov r18,r24
 873 0056 082E      		mov __tmp_reg__,r24
 874 0058 000C      		lsl r0
 875 005a 330B      		sbc r19,r19
 876 005c 3F93      		push r19
 877               	.LCFI8:
 878               		.cfi_def_cfa_offset 11
 879 005e 8F93      		push r24
 880               	.LCFI9:
 881               		.cfi_def_cfa_offset 12
 882 0060 80E0      		ldi r24,lo8(__c.2173)
 883 0062 90E0      		ldi r25,hi8(__c.2173)
 884 0064 9F93      		push r25
 885               	.LCFI10:
 886               		.cfi_def_cfa_offset 13
 887 0066 8F93      		push r24
 888               	.LCFI11:
 889               		.cfi_def_cfa_offset 14
 890 0068 0E94 0000 		call __xprintf
 364:tmk_core/common/mousekey.c ****     print(" ");
 891               		.loc 1 364 5 view .LVU278
 892               	.LBE30:
 893               	.LBE45:
 894               		.loc 1 364 5 view .LVU279
 895               		.loc 1 364 5 view .LVU280
 896               	.LBB46:
 897               	.LBB31:
 898 006c 80E0      		ldi r24,lo8(__c.2175)
 899 006e 90E0      		ldi r25,hi8(__c.2175)
 900 0070 0E94 0000 		call xputs
 365:tmk_core/common/mousekey.c ****     print_decs(mouse_report.v);
 901               		.loc 1 365 5 view .LVU281
 902               	.LBE31:
 903               	.LBE46:
 904               		.loc 1 365 5 view .LVU282
 905               		.loc 1 365 5 view .LVU283
 906               	.LBB47:
 907               	.LBB32:
 908 0074 8091 0000 		lds r24,mouse_report+4
 909 0078 282F      		mov r18,r24
 910 007a 082E      		mov __tmp_reg__,r24
 911 007c 000C      		lsl r0
 912 007e 330B      		sbc r19,r19
 913 0080 3F93      		push r19
 914               	.LCFI12:
 915               		.cfi_def_cfa_offset 15
 916 0082 8F93      		push r24
 917               	.LCFI13:
 918               		.cfi_def_cfa_offset 16
 919 0084 80E0      		ldi r24,lo8(__c.2177)
 920 0086 90E0      		ldi r25,hi8(__c.2177)
 921 0088 9F93      		push r25
 922               	.LCFI14:
 923               		.cfi_def_cfa_offset 17
 924 008a 8F93      		push r24
 925               	.LCFI15:
 926               		.cfi_def_cfa_offset 18
 927 008c 0E94 0000 		call __xprintf
 366:tmk_core/common/mousekey.c ****     print(" ");
 928               		.loc 1 366 5 view .LVU284
 929               	.LBE32:
 930               	.LBE47:
 931               		.loc 1 366 5 view .LVU285
 932               		.loc 1 366 5 view .LVU286
 933               	.LBB48:
 934               	.LBB33:
 935 0090 80E0      		ldi r24,lo8(__c.2179)
 936 0092 90E0      		ldi r25,hi8(__c.2179)
 937 0094 0E94 0000 		call xputs
 367:tmk_core/common/mousekey.c ****     print_decs(mouse_report.h);
 938               		.loc 1 367 5 view .LVU287
 939               	.LBE33:
 940               	.LBE48:
 941               		.loc 1 367 5 view .LVU288
 942               		.loc 1 367 5 view .LVU289
 943               	.LBB49:
 944               	.LBB34:
 945 0098 8091 0000 		lds r24,mouse_report+5
 946 009c 282F      		mov r18,r24
 947 009e 082E      		mov __tmp_reg__,r24
 948 00a0 000C      		lsl r0
 949 00a2 330B      		sbc r19,r19
 950 00a4 3F93      		push r19
 951               	.LCFI16:
 952               		.cfi_def_cfa_offset 19
 953 00a6 8F93      		push r24
 954               	.LCFI17:
 955               		.cfi_def_cfa_offset 20
 956 00a8 80E0      		ldi r24,lo8(__c.2181)
 957 00aa 90E0      		ldi r25,hi8(__c.2181)
 958 00ac 9F93      		push r25
 959               	.LCFI18:
 960               		.cfi_def_cfa_offset 21
 961 00ae 8F93      		push r24
 962               	.LCFI19:
 963               		.cfi_def_cfa_offset 22
 964 00b0 0E94 0000 		call __xprintf
 368:tmk_core/common/mousekey.c ****     print("](");
 965               		.loc 1 368 5 view .LVU290
 966               	.LBE34:
 967               	.LBE49:
 968               		.loc 1 368 5 view .LVU291
 969               		.loc 1 368 5 view .LVU292
 970               	.LBB50:
 971               	.LBB35:
 972 00b4 80E0      		ldi r24,lo8(__c.2183)
 973 00b6 90E0      		ldi r25,hi8(__c.2183)
 974 00b8 0E94 0000 		call xputs
 369:tmk_core/common/mousekey.c ****     print_dec(mousekey_repeat);
 975               		.loc 1 369 5 view .LVU293
 976               	.LBE35:
 977               	.LBE50:
 978               		.loc 1 369 5 view .LVU294
 979               		.loc 1 369 5 view .LVU295
 980               	.LBB51:
 981               	.LBB36:
 982 00bc 8091 0000 		lds r24,mousekey_repeat
 983 00c0 1F92      		push __zero_reg__
 984               	.LCFI20:
 985               		.cfi_def_cfa_offset 23
 986 00c2 8F93      		push r24
 987               	.LCFI21:
 988               		.cfi_def_cfa_offset 24
 989 00c4 80E0      		ldi r24,lo8(__c.2185)
 990 00c6 90E0      		ldi r25,hi8(__c.2185)
 991 00c8 9F93      		push r25
 992               	.LCFI22:
 993               		.cfi_def_cfa_offset 25
 994 00ca 8F93      		push r24
 995               	.LCFI23:
 996               		.cfi_def_cfa_offset 26
 997 00cc 0E94 0000 		call __xprintf
 370:tmk_core/common/mousekey.c ****     print("/");
 998               		.loc 1 370 5 view .LVU296
 999               	.LBE36:
 1000               	.LBE51:
 1001               		.loc 1 370 5 view .LVU297
 1002               		.loc 1 370 5 view .LVU298
 1003               	.LBB52:
 1004               	.LBB37:
 1005 00d0 80E0      		ldi r24,lo8(__c.2187)
 1006 00d2 90E0      		ldi r25,hi8(__c.2187)
 1007 00d4 0E94 0000 		call xputs
 371:tmk_core/common/mousekey.c ****     print_dec(mousekey_accel);
 1008               		.loc 1 371 5 view .LVU299
 1009               	.LBE37:
 1010               	.LBE52:
 1011               		.loc 1 371 5 view .LVU300
 1012               		.loc 1 371 5 view .LVU301
 1013               	.LBB53:
 1014               	.LBB38:
 1015 00d8 8091 0000 		lds r24,mousekey_accel
 1016 00dc 1F92      		push __zero_reg__
 1017               	.LCFI24:
 1018               		.cfi_def_cfa_offset 27
 1019 00de 8F93      		push r24
 1020               	.LCFI25:
 1021               		.cfi_def_cfa_offset 28
 1022 00e0 80E0      		ldi r24,lo8(__c.2189)
 1023 00e2 90E0      		ldi r25,hi8(__c.2189)
 1024 00e4 9F93      		push r25
 1025               	.LCFI26:
 1026               		.cfi_def_cfa_offset 29
 1027 00e6 8F93      		push r24
 1028               	.LCFI27:
 1029               		.cfi_def_cfa_offset 30
 1030 00e8 0E94 0000 		call __xprintf
 372:tmk_core/common/mousekey.c ****     print(")\n");
 1031               		.loc 1 372 5 view .LVU302
 1032               	.LBE38:
 1033               	.LBE53:
 1034               		.loc 1 372 5 view .LVU303
 1035               		.loc 1 372 5 view .LVU304
 1036               	.LBB54:
 1037               	.LBB39:
 1038 00ec 80E0      		ldi r24,lo8(__c.2191)
 1039 00ee 90E0      		ldi r25,hi8(__c.2191)
 1040 00f0 0E94 0000 		call xputs
 1041 00f4 8DB7      		in r24,__SP_L__
 1042 00f6 9EB7      		in r25,__SP_H__
 1043 00f8 4C96      		adiw r24,28
 1044 00fa 0FB6      		in __tmp_reg__,__SREG__
 1045 00fc F894      		cli
 1046 00fe 9EBF      		out __SP_H__,r25
 1047 0100 0FBE      		out __SREG__,__tmp_reg__
 1048 0102 8DBF      		out __SP_L__,r24
 1049               	.LCFI28:
 1050               		.cfi_def_cfa_offset 2
 1051               	.L79:
 1052               	.LBE39:
 1053               	.LBE54:
 346:tmk_core/common/mousekey.c ****     last_timer = timer_read();
 1054               		.loc 1 346 5 view .LVU305
 1055 0104 80E0      		ldi r24,lo8(mouse_report)
 1056 0106 90E0      		ldi r25,hi8(mouse_report)
 1057 0108 0E94 0000 		call host_mouse_send
 347:tmk_core/common/mousekey.c **** }
 1058               		.loc 1 347 5 view .LVU306
 347:tmk_core/common/mousekey.c **** }
 1059               		.loc 1 347 18 is_stmt 0 view .LVU307
 1060 010c 0E94 0000 		call timer_read
 347:tmk_core/common/mousekey.c **** }
 1061               		.loc 1 347 16 view .LVU308
 1062 0110 9093 0000 		sts last_timer+1,r25
 1063 0114 8093 0000 		sts last_timer,r24
 1064               	/* epilogue start */
 348:tmk_core/common/mousekey.c **** 
 1065               		.loc 1 348 1 view .LVU309
 1066 0118 0895      		ret
 1067               		.cfi_endproc
 1068               	.LFE9:
 1070               		.section	.text.mousekey_task,"ax",@progbits
 1071               	.global	mousekey_task
 1073               	mousekey_task:
 1074               	.LFB6:
  98:tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay * 10)) {
 1075               		.loc 1 98 26 is_stmt 1 view -0
 1076               		.cfi_startproc
 1077 0000 1F93      		push r17
 1078               	.LCFI29:
 1079               		.cfi_def_cfa_offset 3
 1080               		.cfi_offset 17, -2
 1081 0002 CF93      		push r28
 1082               	.LCFI30:
 1083               		.cfi_def_cfa_offset 4
 1084               		.cfi_offset 28, -3
 1085 0004 DF93      		push r29
 1086               	.LCFI31:
 1087               		.cfi_def_cfa_offset 5
 1088               		.cfi_offset 29, -4
 1089               	/* prologue: function */
 1090               	/* frame size = 0 */
 1091               	/* stack size = 3 */
 1092               	.L__stack_usage = 3
  99:tmk_core/common/mousekey.c ****         return;
 1093               		.loc 1 99 5 view .LVU311
  99:tmk_core/common/mousekey.c ****         return;
 1094               		.loc 1 99 9 is_stmt 0 view .LVU312
 1095 0006 8091 0000 		lds r24,last_timer
 1096 000a 9091 0000 		lds r25,last_timer+1
 1097 000e 0E94 0000 		call timer_elapsed
 1098               	.LVL83:
 1099 0012 FC01      		movw r30,r24
  99:tmk_core/common/mousekey.c ****         return;
 1100               		.loc 1 99 54 view .LVU313
 1101 0014 2091 0000 		lds r18,mousekey_repeat
  99:tmk_core/common/mousekey.c ****         return;
 1102               		.loc 1 99 68 view .LVU314
 1103 0018 8091 0000 		lds r24,mk_interval
 1104 001c 90E0      		ldi r25,0
 1105 001e 2111      		cpse r18,__zero_reg__
 1106 0020 00C0      		rjmp .L85
  99:tmk_core/common/mousekey.c ****         return;
 1107               		.loc 1 99 79 discriminator 2 view .LVU315
 1108 0022 8091 0000 		lds r24,mk_delay
 1109 0026 90E0      		ldi r25,0
 1110 0028 6AE0      		ldi r22,lo8(10)
 1111 002a 70E0      		ldi r23,0
 1112 002c 0E94 0000 		call __mulhi3
 1113               	.L85:
  99:tmk_core/common/mousekey.c ****         return;
 1114               		.loc 1 99 8 discriminator 4 view .LVU316
 1115 0030 E817      		cp r30,r24
 1116 0032 F907      		cpc r31,r25
 1117 0034 00F0      		brlo .L83
 102:tmk_core/common/mousekey.c ****         return;
 1118               		.loc 1 102 5 is_stmt 1 view .LVU317
 102:tmk_core/common/mousekey.c ****         return;
 1119               		.loc 1 102 21 is_stmt 0 view .LVU318
 1120 0036 9091 0000 		lds r25,mouse_report+2
 1121 003a C091 0000 		lds r28,mouse_report+3
 1122 003e D091 0000 		lds r29,mouse_report+4
 1123 0042 1091 0000 		lds r17,mouse_report+5
 102:tmk_core/common/mousekey.c ****         return;
 1124               		.loc 1 102 8 view .LVU319
 1125 0046 9111      		cpse r25,__zero_reg__
 1126 0048 00C0      		rjmp .L87
 102:tmk_core/common/mousekey.c ****         return;
 1127               		.loc 1 102 75 discriminator 1 view .LVU320
 1128 004a 8C2F      		mov r24,r28
 1129 004c 8D2B      		or r24,r29
 1130 004e 812B      		or r24,r17
 1131 0050 01F0      		breq .+2
 1132 0052 00C0      		rjmp .L114
 1133               	.L83:
 1134               	/* epilogue start */
 126:tmk_core/common/mousekey.c **** 
 1135               		.loc 1 126 1 view .LVU321
 1136 0054 DF91      		pop r29
 1137 0056 CF91      		pop r28
 1138 0058 1F91      		pop r17
 1139 005a 0895      		ret
 1140               	.L87:
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 1141               		.loc 1 105 5 is_stmt 1 view .LVU322
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 1142               		.loc 1 105 8 is_stmt 0 view .LVU323
 1143 005c 2F3F      		cpi r18,lo8(-1)
 1144 005e 01F0      		breq .L89
 1145               	.L104:
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 1146               		.loc 1 105 39 is_stmt 1 discriminator 1 view .LVU324
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 1147               		.loc 1 105 54 is_stmt 0 discriminator 1 view .LVU325
 1148 0060 2F5F      		subi r18,lo8(-(1))
 1149 0062 2093 0000 		sts mousekey_repeat,r18
 1150               	.L89:
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 1151               		.loc 1 106 5 is_stmt 1 view .LVU326
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 1152               		.loc 1 106 8 is_stmt 0 view .LVU327
 1153 0066 1916      		cp __zero_reg__,r25
 1154 0068 04F4      		brge .L90
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 1155               		.loc 1 106 29 is_stmt 1 discriminator 1 view .LVU328
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 1156               		.loc 1 106 46 is_stmt 0 discriminator 1 view .LVU329
 1157 006a 0E94 0000 		call move_unit
 1158               	.LVL84:
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 1159               		.loc 1 106 44 discriminator 1 view .LVU330
 1160 006e 8093 0000 		sts mouse_report+2,r24
 1161               	.L90:
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 1162               		.loc 1 107 5 is_stmt 1 view .LVU331
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 1163               		.loc 1 107 8 is_stmt 0 view .LVU332
 1164 0072 8091 0000 		lds r24,mouse_report+2
 1165 0076 87FF      		sbrs r24,7
 1166 0078 00C0      		rjmp .L91
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 1167               		.loc 1 107 29 is_stmt 1 discriminator 1 view .LVU333
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 1168               		.loc 1 107 46 is_stmt 0 discriminator 1 view .LVU334
 1169 007a 0E94 0000 		call move_unit
 1170               	.LVL85:
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 1171               		.loc 1 107 44 discriminator 1 view .LVU335
 1172 007e 8195      		neg r24
 1173 0080 8093 0000 		sts mouse_report+2,r24
 1174               	.L91:
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 1175               		.loc 1 108 5 is_stmt 1 view .LVU336
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 1176               		.loc 1 108 8 is_stmt 0 view .LVU337
 1177 0084 1C16      		cp __zero_reg__,r28
 1178 0086 04F4      		brge .L92
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 1179               		.loc 1 108 29 is_stmt 1 discriminator 1 view .LVU338
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 1180               		.loc 1 108 46 is_stmt 0 discriminator 1 view .LVU339
 1181 0088 0E94 0000 		call move_unit
 1182               	.LVL86:
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 1183               		.loc 1 108 44 discriminator 1 view .LVU340
 1184 008c 8093 0000 		sts mouse_report+3,r24
 1185               	.L92:
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 1186               		.loc 1 109 5 is_stmt 1 view .LVU341
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 1187               		.loc 1 109 8 is_stmt 0 view .LVU342
 1188 0090 8091 0000 		lds r24,mouse_report+3
 1189 0094 87FF      		sbrs r24,7
 1190 0096 00C0      		rjmp .L93
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 1191               		.loc 1 109 29 is_stmt 1 discriminator 1 view .LVU343
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 1192               		.loc 1 109 46 is_stmt 0 discriminator 1 view .LVU344
 1193 0098 0E94 0000 		call move_unit
 1194               	.LVL87:
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 1195               		.loc 1 109 44 discriminator 1 view .LVU345
 1196 009c 8195      		neg r24
 1197 009e 8093 0000 		sts mouse_report+3,r24
 1198               	.L93:
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1199               		.loc 1 111 5 is_stmt 1 view .LVU346
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1200               		.loc 1 111 21 is_stmt 0 view .LVU347
 1201 00a2 8091 0000 		lds r24,mouse_report+2
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1202               		.loc 1 111 8 view .LVU348
 1203 00a6 8823      		tst r24
 1204 00a8 01F0      		breq .L95
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1205               		.loc 1 111 39 discriminator 1 view .LVU349
 1206 00aa 2091 0000 		lds r18,mouse_report+3
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 1207               		.loc 1 111 24 discriminator 1 view .LVU350
 1208 00ae 2223      		tst r18
 1209 00b0 01F0      		breq .L95
 112:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 1210               		.loc 1 112 9 is_stmt 1 view .LVU351
 1211               	.LVL88:
 1212               	.LBB55:
 1213               	.LBI55:
  26:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
 1214               		.loc 1 26 15 view .LVU352
 1215               	.LBB56:
  31:tmk_core/common/mousekey.c **** }
 1216               		.loc 1 31 5 view .LVU353
  31:tmk_core/common/mousekey.c **** }
 1217               		.loc 1 31 15 is_stmt 0 view .LVU354
 1218 00b2 082E      		mov __tmp_reg__,r24
 1219 00b4 000C      		lsl r0
 1220 00b6 990B      		sbc r25,r25
 1221               	.LVL89:
  31:tmk_core/common/mousekey.c **** }
 1222               		.loc 1 31 15 view .LVU355
 1223 00b8 65EB      		ldi r22,lo8(-75)
 1224 00ba 70E0      		ldi r23,0
 1225 00bc 0E94 0000 		call __mulhi3
 1226               	.LVL90:
  31:tmk_core/common/mousekey.c **** }
 1227               		.loc 1 31 15 view .LVU356
 1228               	.LBE56:
 1229               	.LBE55:
 113:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 1230               		.loc 1 113 9 is_stmt 1 view .LVU357
 113:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 1231               		.loc 1 113 12 is_stmt 0 view .LVU358
 1232 00c0 9923      		tst r25
 1233 00c2 01F0      		breq .L97
 112:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 1234               		.loc 1 112 24 view .LVU359
 1235 00c4 9093 0000 		sts mouse_report+2,r25
 1236               	.L98:
 116:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 1237               		.loc 1 116 9 is_stmt 1 view .LVU360
 1238               	.LVL91:
 1239               	.LBB57:
 1240               	.LBI57:
  26:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
 1241               		.loc 1 26 15 view .LVU361
 1242               	.LBB58:
  31:tmk_core/common/mousekey.c **** }
 1243               		.loc 1 31 5 view .LVU362
  31:tmk_core/common/mousekey.c **** }
 1244               		.loc 1 31 15 is_stmt 0 view .LVU363
 1245 00c8 822F      		mov r24,r18
 1246 00ca 220F      		lsl r18
 1247 00cc 990B      		sbc r25,r25
 1248 00ce 65EB      		ldi r22,lo8(-75)
 1249 00d0 70E0      		ldi r23,0
 1250 00d2 0E94 0000 		call __mulhi3
 1251               	.LVL92:
  31:tmk_core/common/mousekey.c **** }
 1252               		.loc 1 31 15 view .LVU364
 1253               	.LBE58:
 1254               	.LBE57:
 117:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 1255               		.loc 1 117 9 is_stmt 1 view .LVU365
 117:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 1256               		.loc 1 117 12 is_stmt 0 view .LVU366
 1257 00d6 9923      		tst r25
 1258 00d8 01F0      		breq .L99
 116:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 1259               		.loc 1 116 24 view .LVU367
 1260 00da 9093 0000 		sts mouse_report+3,r25
 1261               	.L95:
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 1262               		.loc 1 121 5 is_stmt 1 view .LVU368
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 1263               		.loc 1 121 8 is_stmt 0 view .LVU369
 1264 00de 1D16      		cp __zero_reg__,r29
 1265 00e0 04F4      		brge .L100
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 1266               		.loc 1 121 29 is_stmt 1 discriminator 1 view .LVU370
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 1267               		.loc 1 121 46 is_stmt 0 discriminator 1 view .LVU371
 1268 00e2 0E94 0000 		call wheel_unit
 1269               	.LVL93:
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 1270               		.loc 1 121 44 discriminator 1 view .LVU372
 1271 00e6 8093 0000 		sts mouse_report+4,r24
 1272               	.L100:
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 1273               		.loc 1 122 5 is_stmt 1 view .LVU373
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 1274               		.loc 1 122 8 is_stmt 0 view .LVU374
 1275 00ea 8091 0000 		lds r24,mouse_report+4
 1276 00ee 87FF      		sbrs r24,7
 1277 00f0 00C0      		rjmp .L101
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 1278               		.loc 1 122 29 is_stmt 1 discriminator 1 view .LVU375
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 1279               		.loc 1 122 46 is_stmt 0 discriminator 1 view .LVU376
 1280 00f2 0E94 0000 		call wheel_unit
 1281               	.LVL94:
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 1282               		.loc 1 122 44 discriminator 1 view .LVU377
 1283 00f6 8195      		neg r24
 1284 00f8 8093 0000 		sts mouse_report+4,r24
 1285               	.L101:
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 1286               		.loc 1 123 5 is_stmt 1 view .LVU378
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 1287               		.loc 1 123 8 is_stmt 0 view .LVU379
 1288 00fc 1116      		cp __zero_reg__,r17
 1289 00fe 04F4      		brge .L102
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 1290               		.loc 1 123 29 is_stmt 1 discriminator 1 view .LVU380
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 1291               		.loc 1 123 46 is_stmt 0 discriminator 1 view .LVU381
 1292 0100 0E94 0000 		call wheel_unit
 1293               	.LVL95:
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 1294               		.loc 1 123 44 discriminator 1 view .LVU382
 1295 0104 8093 0000 		sts mouse_report+5,r24
 1296               	.L102:
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 1297               		.loc 1 124 5 is_stmt 1 view .LVU383
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 1298               		.loc 1 124 8 is_stmt 0 view .LVU384
 1299 0108 8091 0000 		lds r24,mouse_report+5
 1300 010c 87FF      		sbrs r24,7
 1301 010e 00C0      		rjmp .L103
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 1302               		.loc 1 124 29 is_stmt 1 discriminator 1 view .LVU385
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 1303               		.loc 1 124 46 is_stmt 0 discriminator 1 view .LVU386
 1304 0110 0E94 0000 		call wheel_unit
 1305               	.LVL96:
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 1306               		.loc 1 124 44 discriminator 1 view .LVU387
 1307 0114 8195      		neg r24
 1308 0116 8093 0000 		sts mouse_report+5,r24
 1309               	.L103:
 125:tmk_core/common/mousekey.c **** }
 1310               		.loc 1 125 5 is_stmt 1 view .LVU388
 1311               	/* epilogue start */
 126:tmk_core/common/mousekey.c **** 
 1312               		.loc 1 126 1 is_stmt 0 view .LVU389
 1313 011a DF91      		pop r29
 1314 011c CF91      		pop r28
 1315 011e 1F91      		pop r17
 125:tmk_core/common/mousekey.c **** }
 1316               		.loc 1 125 5 view .LVU390
 1317 0120 0C94 0000 		jmp mousekey_send
 1318               	.LVL97:
 1319               	.L97:
 114:tmk_core/common/mousekey.c ****         }
 1320               		.loc 1 114 13 is_stmt 1 view .LVU391
 114:tmk_core/common/mousekey.c ****         }
 1321               		.loc 1 114 28 is_stmt 0 view .LVU392
 1322 0124 81E0      		ldi r24,lo8(1)
 1323 0126 8093 0000 		sts mouse_report+2,r24
 1324 012a 00C0      		rjmp .L98
 1325               	.L99:
 118:tmk_core/common/mousekey.c ****         }
 1326               		.loc 1 118 13 is_stmt 1 view .LVU393
 118:tmk_core/common/mousekey.c ****         }
 1327               		.loc 1 118 28 is_stmt 0 view .LVU394
 1328 012c 81E0      		ldi r24,lo8(1)
 1329 012e 8093 0000 		sts mouse_report+3,r24
 1330 0132 00C0      		rjmp .L95
 1331               	.L114:
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 1332               		.loc 1 105 5 is_stmt 1 view .LVU395
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 1333               		.loc 1 105 8 is_stmt 0 view .LVU396
 1334 0134 2F3F      		cpi r18,lo8(-1)
 1335 0136 01F0      		breq .+2
 1336 0138 00C0      		rjmp .L104
 1337 013a 00C0      		rjmp .L91
 1338               		.cfi_endproc
 1339               	.LFE6:
 1341               		.section	.text.mousekey_clear,"ax",@progbits
 1342               	.global	mousekey_clear
 1344               	mousekey_clear:
 1345               	.LFB10:
 350:tmk_core/common/mousekey.c ****     mouse_report    = (report_mouse_t){};
 1346               		.loc 1 350 27 is_stmt 1 view -0
 1347               		.cfi_startproc
 1348               	/* prologue: function */
 1349               	/* frame size = 0 */
 1350               	/* stack size = 0 */
 1351               	.L__stack_usage = 0
 351:tmk_core/common/mousekey.c ****     mousekey_repeat = 0;
 1352               		.loc 1 351 5 view .LVU398
 351:tmk_core/common/mousekey.c ****     mousekey_repeat = 0;
 1353               		.loc 1 351 21 is_stmt 0 view .LVU399
 1354 0000 86E0      		ldi r24,lo8(6)
 1355 0002 E0E0      		ldi r30,lo8(mouse_report)
 1356 0004 F0E0      		ldi r31,hi8(mouse_report)
 1357 0006 DF01      		movw r26,r30
 1358               		0:
 1359 0008 1D92      		st X+,__zero_reg__
 1360 000a 8A95      		dec r24
 1361 000c 01F4      		brne 0b
 352:tmk_core/common/mousekey.c ****     mousekey_accel  = 0;
 1362               		.loc 1 352 5 is_stmt 1 view .LVU400
 352:tmk_core/common/mousekey.c ****     mousekey_accel  = 0;
 1363               		.loc 1 352 21 is_stmt 0 view .LVU401
 1364 000e 1092 0000 		sts mousekey_repeat,__zero_reg__
 353:tmk_core/common/mousekey.c **** }
 1365               		.loc 1 353 5 is_stmt 1 view .LVU402
 353:tmk_core/common/mousekey.c **** }
 1366               		.loc 1 353 21 is_stmt 0 view .LVU403
 1367 0012 1092 0000 		sts mousekey_accel,__zero_reg__
 1368               	/* epilogue start */
 354:tmk_core/common/mousekey.c **** 
 1369               		.loc 1 354 1 view .LVU404
 1370 0016 0895      		ret
 1371               		.cfi_endproc
 1372               	.LFE10:
 1374               		.section	.progmem.data.__c.2191,"a"
 1377               	__c.2191:
 1378 0000 290A 00   		.string	")\n"
 1379               		.section	.progmem.data.__c.2189,"a"
 1382               	__c.2189:
 1383 0000 2575 00   		.string	"%u"
 1384               		.section	.progmem.data.__c.2187,"a"
 1387               	__c.2187:
 1388 0000 2F00      		.string	"/"
 1389               		.section	.progmem.data.__c.2185,"a"
 1392               	__c.2185:
 1393 0000 2575 00   		.string	"%u"
 1394               		.section	.progmem.data.__c.2183,"a"
 1397               	__c.2183:
 1398 0000 5D28 00   		.string	"]("
 1399               		.section	.progmem.data.__c.2181,"a"
 1402               	__c.2181:
 1403 0000 2564 00   		.string	"%d"
 1404               		.section	.progmem.data.__c.2179,"a"
 1407               	__c.2179:
 1408 0000 2000      		.string	" "
 1409               		.section	.progmem.data.__c.2177,"a"
 1412               	__c.2177:
 1413 0000 2564 00   		.string	"%d"
 1414               		.section	.progmem.data.__c.2175,"a"
 1417               	__c.2175:
 1418 0000 2000      		.string	" "
 1419               		.section	.progmem.data.__c.2173,"a"
 1422               	__c.2173:
 1423 0000 2564 00   		.string	"%d"
 1424               		.section	.progmem.data.__c.2171,"a"
 1427               	__c.2171:
 1428 0000 2000      		.string	" "
 1429               		.section	.progmem.data.__c.2169,"a"
 1432               	__c.2169:
 1433 0000 2564 00   		.string	"%d"
 1434               		.section	.progmem.data.__c.2167,"a"
 1437               	__c.2167:
 1438 0000 7C00      		.string	"|"
 1439               		.section	.progmem.data.__c.2165,"a"
 1442               	__c.2165:
 1443 0000 2530 3258 		.string	"%02X"
 1443      00
 1444               		.section	.progmem.data.__c.2163,"a"
 1447               	__c.2163:
 1448 0000 6D6F 7573 		.string	"mousekey [btn|x y v h](rep/acl): ["
 1448      656B 6579 
 1448      205B 6274 
 1448      6E7C 7820 
 1448      7920 7620 
 1449               	.global	mk_wheel_time_to_max
 1450               		.section	.data.mk_wheel_time_to_max,"aw"
 1453               	mk_wheel_time_to_max:
 1454 0000 28        		.byte	40
 1455               	.global	mk_wheel_max_speed
 1456               		.section	.data.mk_wheel_max_speed,"aw"
 1459               	mk_wheel_max_speed:
 1460 0000 08        		.byte	8
 1461               	.global	mk_time_to_max
 1462               		.section	.data.mk_time_to_max,"aw"
 1465               	mk_time_to_max:
 1466 0000 14        		.byte	20
 1467               	.global	mk_max_speed
 1468               		.section	.data.mk_max_speed,"aw"
 1471               	mk_max_speed:
 1472 0000 0A        		.byte	10
 1473               	.global	mk_interval
 1474               		.section	.data.mk_interval,"aw"
 1477               	mk_interval:
 1478 0000 32        		.byte	50
 1479               	.global	mk_delay
 1480               		.section	.data.mk_delay,"aw"
 1483               	mk_delay:
 1484 0000 1E        		.byte	30
 1485               		.section	.bss.last_timer,"aw",@nobits
 1488               	last_timer:
 1489 0000 0000      		.zero	2
 1490               		.section	.bss.mousekey_repeat,"aw",@nobits
 1493               	mousekey_repeat:
 1494 0000 00        		.zero	1
 1495               		.section	.bss.mousekey_accel,"aw",@nobits
 1498               	mousekey_accel:
 1499 0000 00        		.zero	1
 1500               		.section	.bss.mouse_report,"aw",@nobits
 1503               	mouse_report:
 1504 0000 0000 0000 		.zero	6
 1504      0000 
 1505               		.text
 1506               	.Letext0:
 1507               		.file 2 "/usr/local/Cellar/avr-gcc@8/8.4.0/avr/include/stdint.h"
 1508               		.file 3 "tmk_core/common/report.h"
 1509               		.file 4 "tmk_core/common/host.h"
 1510               		.file 5 "tmk_core/common/timer.h"
 1511               		.file 6 "tmk_core/common/avr/xprintf.h"
 1512               		.file 7 "tmk_core/common/debug.h"
 1513               		.file 8 "tmk_core/common/mousekey.h"
 1514               		.file 9 "tmk_core/common/keycode.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 mousekey.c
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:4      *ABS*:000000000000003f __SREG__
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:5      *ABS*:0000000000000000 __tmp_reg__
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:6      *ABS*:0000000000000001 __zero_reg__
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:12     .text.move_unit:0000000000000000 move_unit
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1498   .bss.mousekey_accel:0000000000000000 mousekey_accel
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1471   .data.mk_max_speed:0000000000000000 mk_max_speed
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1493   .bss.mousekey_repeat:0000000000000000 mousekey_repeat
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1465   .data.mk_time_to_max:0000000000000000 mk_time_to_max
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:151    .text.wheel_unit:0000000000000000 wheel_unit
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1459   .data.mk_wheel_max_speed:0000000000000000 mk_wheel_max_speed
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1453   .data.mk_wheel_time_to_max:0000000000000000 mk_wheel_time_to_max
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:269    .text.mousekey_on:0000000000000000 mousekey_on
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1503   .bss.mouse_report:0000000000000000 mouse_report
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:506    .text.mousekey_off:0000000000000000 mousekey_off
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:765    .text.mousekey_send:0000000000000000 mousekey_send
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1447   .progmem.data.__c.2163:0000000000000000 __c.2163
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1442   .progmem.data.__c.2165:0000000000000000 __c.2165
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1437   .progmem.data.__c.2167:0000000000000000 __c.2167
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1432   .progmem.data.__c.2169:0000000000000000 __c.2169
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1427   .progmem.data.__c.2171:0000000000000000 __c.2171
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1422   .progmem.data.__c.2173:0000000000000000 __c.2173
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1417   .progmem.data.__c.2175:0000000000000000 __c.2175
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1412   .progmem.data.__c.2177:0000000000000000 __c.2177
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1407   .progmem.data.__c.2179:0000000000000000 __c.2179
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1402   .progmem.data.__c.2181:0000000000000000 __c.2181
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1397   .progmem.data.__c.2183:0000000000000000 __c.2183
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1392   .progmem.data.__c.2185:0000000000000000 __c.2185
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1387   .progmem.data.__c.2187:0000000000000000 __c.2187
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1382   .progmem.data.__c.2189:0000000000000000 __c.2189
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1377   .progmem.data.__c.2191:0000000000000000 __c.2191
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1488   .bss.last_timer:0000000000000000 last_timer
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1073   .text.mousekey_task:0000000000000000 mousekey_task
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1477   .data.mk_interval:0000000000000000 mk_interval
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1483   .data.mk_delay:0000000000000000 mk_delay
/var/folders/hg/m293bnw975q820z9tg0f9gdw0000gn/T//cceK5qJr.s:1344   .text.mousekey_clear:0000000000000000 mousekey_clear

UNDEFINED SYMBOLS
__mulhi3
__divmodhi4
debug_config
xputs
__xprintf
host_mouse_send
timer_read
timer_elapsed
__do_copy_data
__do_clear_bss
